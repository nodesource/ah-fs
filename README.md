# ah-fs [![build status](https://secure.travis-ci.org/nodesource/ah-fs.svg?branch=master)](http://travis-ci.org/nodesource/ah-fs)

Tracks async hook events related to file system operations.

## Installation

    npm install ah-fs

## [API](https://nodesource.github.io/ah-fs)

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### FileSystemActivityCollector

Instantiates a FileSystemActivityCollector.

Extends [ActivityCollector](https://github.com/nodesource/ah-collector) and thus
exposes the same [public
API](https://github.com/nodesource/ah-collector#api) with added
functionality.

**Parameters**

-   `$0.start` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)>** the start time of the process, i.e. the result of `process.hrtime()`
-   `$0.stackCapturer` **StackCapturer?** [see ah-stack-capturer](https://github.com/nodesource/ah-stack-capturer) which
    configures how and when stacks traces are captured and processed.By default a StackCapturer is used that captures stacks for all events for
    file system related types: `FSREQWRAP`, `FSREQUESTWRAP` (optional, default `StackCapturer`)
-   `$0.bufferLength` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** determines how many elements of Buffers are
    captured. By default not Buffer data is captured. (optional, default `0`)
-   `$0.stringLength` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** determines how much of each string is
    captured. By default no string data is captured. (optional, default `0`)
-   `$0.captureArguments` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** if `true` arguments of callbacks
    are captured when they are processed. (optional, default `false`)
-   `$0.captureSource` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)?** if `true` the source code of callbacks
    is captured when they are processed. (optional, default `false`)

### fileSystemActivityCollector.fileSystemActivities

Getter that returns all activities related to file system operations.

Returns **[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)&lt;[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String), [object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)>** fileSystemActivities

### fileSystemActivityCollector.cleanAllResources

Cleans up all captured resources which means that they are processed,
meaningful data extracted and the reference to the actual resource removed
so it can be GCed.

Resources are cleaned during `after` and `destroy` events, therefore
calling this function only affects those resources for which none of these
events have fired yet.

Returns **[FileSystemActivityCollector](#filesystemactivitycollector)** fileSystemActivityCollector

### fileSystemActivityCollector.stringifyBuffers

Finds all buffers that are part of the resources, including arguments
passed to callbacks and stringifies their value for the supplied
encodings.

**Parameters**

-   `encodings` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)>?** specified for which encodings to create
    strings. In order to creates strings for all encodings, pass
    [stringify-buffer.encodings](https://github.com/nodesource/stringify-buffer#stringifybufferencodings) (optional, default `'utf8','hex'`)

Returns **[FileSystemActivityCollector](#filesystemactivitycollector)** fileSystemActivityCollector

## License

MIT
